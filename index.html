<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DZ-STORE | Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --main: #1a2a6c; --blue: #0084ff; }
        * { font-family: 'Cairo', sans-serif; }
        body { background: #f0f2f5; margin: 0; padding: 20px; }
        
        .shop-header { text-align: center; padding: 40px; background: var(--main); color: white; border-radius: 15px; margin-bottom: 30px; }
        
        .products-container { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 20px; 
            max-width: 1200px; margin: 0 auto;
        }

        .card { 
            background: white; border-radius: 15px; overflow: hidden; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: 0.3s;
        }
        .card:hover { transform: translateY(-10px); }
        
        .card-img { 
            width: 100%; height: 200px; object-fit: cover; 
            background: #eee; border-bottom: 3px solid var(--blue);
        }

        .card-content { padding: 20px; }
        .price-tag { color: var(--blue); font-weight: bold; font-size: 1.2rem; margin: 10px 0; }
        
        .buy-btn { 
            display: block; width: 100%; padding: 12px; margin-top: 15px;
            background: var(--blue); color: white; text-align: center;
            text-decoration: none; border-radius: 8px; font-weight: bold;
            transition: 0.3s;
        }
        .buy-btn:hover { background: #0073e6; }

        #loader { text-align: center; padding: 50px; font-size: 1.5rem; color: var(--main); }
    </style>
</head>
<body>

    <div class="shop-header">
        <h1>DZ-STORE <i class="fas fa-shopping-cart"></i></h1>
        <p>Ø£ÙØ¶Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø¨Ø£Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</p>
    </div>

    <div id="loader">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ø±ÙˆØ¶...</div>
    <div class="products-container" id="shopGrid"></div>

    <script>
        // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø³ØªÙˆØ¯Ø¹Ùƒ ---
        const REPO_OWNER = 'Cheikh-mimo';
        const REPO_NAME = 'DZ-STORE';
        const JSON_PATH = 'data/products.json';

        // Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§Ù…
        const URL = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/main/${JSON_PATH}`;

        async function fetchProducts() {
            try {
                // Ø¥Ø¶Ø§ÙØ© t Ù„Ù…Ù†Ø¹ Ø§Ù„ÙƒØ§Ø´ ÙˆØ¬Ù„Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙÙˆØ±Ø§Ù‹
                const response = await fetch(URL + '?t=' + Date.now());
                const products = await response.json();
                
                document.getElementById('loader').style.display = 'none';
                displayProducts(products);
            } catch (error) {
                document.getElementById('loader').innerHTML = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹ Ø£Ùˆ Ø§Ù„Ù…ØªØ¬Ø± ØªØ­Øª Ø§Ù„ØµÙŠØ§Ù†Ø© ğŸ› ï¸";
                console.error("Error:", error);
            }
        }

        function displayProducts(products) {
            const grid = document.getElementById('shopGrid');
            grid.innerHTML = ''; 

            products.reverse().forEach(item => { 
                grid.innerHTML += `
                    <div class="card">
                        <img src="${item.image || 'https://via.placeholder.com/300x200?text=No+Image'}" 
                             class="card-img" alt="${item.title}">
                        <div class="card-content">
                            <span style="font-size: 0.8rem; background: #e7f3ff; color: #1877f2; padding: 3px 8px; border-radius: 5px;">${item.category}</span>
                            <h3 style="margin: 10px 0;">${item.title}</h3>
                            <div class="price-tag">${item.priceDinar} DA / $${item.priceDollar}</div>
                            <a href="${item.sellerLink}" target="_blank" class="buy-btn">
                                <i class="fab fa-facebook-messenger"></i> Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† Ø¹Ø¨Ø± ÙÙŠØ³Ø¨ÙˆÙƒ
                            </a>
                        </div>
                    </div>
                `;
            });
        }

        fetchProducts();
    </script>
</body>
</html>
