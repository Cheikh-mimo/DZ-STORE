<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DZ-STORE | Luxury Gaming Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #050505; color: #e5e7eb; }
        .luxury-card { background: linear-gradient(145deg, #111827, #020617); border: 1px solid #1e293b; }
        .gold-text { background: linear-gradient(to right, #fde047, #ca8a04); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .electric-blue { color: #3b82f6; text-shadow: 0 0 10px rgba(59, 130, 246, 0.5); }
        .btn-luxury { background: linear-gradient(90deg, #ca8a04 0%, #a16207 100%); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .btn-luxury:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(202, 138, 4, 0.4); }
        .glass-input { background: rgba(31, 41, 55, 0.5); border: 1px solid #374151; transition: 0.3s; }
        .glass-input:focus { border-color: #3b82f6; box-shadow: 0 0 8px rgba(59, 130, 246, 0.3); outline: none; }
        .sidebar-link:hover { background: rgba(59, 130, 246, 0.1); border-right: 4px solid #3b82f6; }
    </style>
</head>
<body>

    <div id="main-content" class="min-h-screen flex flex-col md:flex-row" style="display:none;">
        <aside class="w-full md:w-72 luxury-card p-6 flex flex-col shadow-2xl">
            <div class="mb-10 text-center">
                <h1 class="text-3xl font-extrabold gold-text tracking-tighter italic">DZ-STORE</h1>
                <p class="text-[10px] electric-blue font-bold uppercase tracking-[0.2em]">Gaming Luxury Dashboard</p>
            </div>
            <nav class="flex-1 space-y-2 text-sm">
                <a href="#" class="sidebar-link flex items-center p-3 rounded-lg text-white font-bold transition">
                    <i class="fas fa-plus-square ml-3 text-lg electric-blue"></i> Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯
                </a>
            </nav>
            <div class="mt-auto pt-6 border-t border-gray-800">
                <button onclick="clearToken()" class="flex items-center text-red-500 hover:text-red-400 font-bold transition">
                    <i class="fas fa-power-off ml-2"></i> Ø®Ø±ÙˆØ¬ Ø¢Ù…Ù†
                </button>
            </div>
        </aside>

        <main class="flex-1 p-4 md:p-10">
            <div class="max-w-6xl mx-auto">
                <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
                    <div class="xl:col-span-5 luxury-card p-8 rounded-3xl shadow-2xl border-blue-900/20">
                        <h3 class="text-xl font-bold mb-6 gold-text">Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯</h3>
                        <div class="space-y-4">
                            <input type="text" id="p-name" class="w-full glass-input rounded-xl p-3 text-white" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
                            <div class="grid grid-cols-2 gap-4">
                                <select id="p-cat" class="w-full glass-input rounded-xl p-3 text-white">
                                    <option value="Free Fire">ğŸ”¥ Free Fire</option>
                                    <option value="PUBG">ğŸª‚ PUBG Mobile</option>
                                    <option value="Google Play">ğŸ’³ Google Play</option>
                                </select>
                                <select id="p-type" class="w-full glass-input rounded-xl p-3 text-white">
                                    <option value="Sale">Ø¨ÙŠØ¹</option>
                                    <option value="Buy">Ø´Ø±Ø§Ø¡</option>
                                </select>
                                <input type="number" id="p-price-da" class="w-full glass-input rounded-xl p-3 text-white" placeholder="Ø§Ù„Ø³Ø¹Ø± DA">
                                <input type="number" id="p-price-usd" class="w-full glass-input rounded-xl p-3 text-white" placeholder="Ø§Ù„Ø³Ø¹Ø± $">
                            </div>
                            <input type="text" id="p-img" class="w-full glass-input rounded-xl p-3 text-white" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
                            <input type="text" id="p-link" class="w-full glass-input rounded-xl p-3 text-white" placeholder="Ø±Ø§Ø¨Ø· ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¨Ø§Ø¦Ø¹">
                            <textarea id="p-desc" rows="3" class="w-full glass-input rounded-xl p-3 text-white" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬"></textarea>
                            <button id="submit-btn" onclick="uploadToGithub()" class="w-full btn-luxury p-4 rounded-xl font-extrabold text-black">Ù†Ø´Ø± Ø§Ù„Ø¹Ø±Ø¶</button>
                        </div>
                        <div id="status" class="mt-4 text-center text-sm font-bold"></div>
                    </div>
                    <div class="xl:col-span-7">
                        <div id="products-list" class="grid grid-cols-1 gap-4 max-h-[700px] overflow-y-auto"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

<script>
    const REPO = "cheikh-mimo/DZ-STORE";
    const FILE_PATH = "products.json";

    // --- Ø§Ù„Ø­Ù„ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø·Ù„Ø¨ Ø§Ù„ØªÙˆÙƒÙ† Ø¨Ø¯ÙˆÙ† ØµÙØ­Ø© LOGIN Ù…Ù†ÙØµÙ„Ø© ---
    window.onload = function() {
        if(!localStorage.getItem('gh_token_mimo')) {
            let t = prompt("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ GitHub Token (ghp_...) Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:");
            if(t && t.startsWith('ghp_')) {
                localStorage.setItem('gh_token_mimo', t);
                location.reload();
            } else {
                alert("Ø§Ù„ØªÙˆÙƒÙ† Ù…Ø·Ù„ÙˆØ¨!");
                document.body.innerHTML = "<h2 style='color:white; text-align:center; margin-top:50px;'>ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªÙˆÙƒÙ† Ù„ÙØªØ­ Ø§Ù„Ù„ÙˆØ­Ø©. Ø£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©.</h2>";
            }
        } else {
            document.getElementById('main-content').style.display = 'flex';
            loadProducts();
        }
    }

    async function loadProducts() {
        const token = localStorage.getItem('gh_token_mimo');
        const listDiv = document.getElementById('products-list');
        try {
            const res = await fetch(`https://api.github.com/repos/${REPO}/contents/${FILE_PATH}`, {
                headers: { 'Authorization': `token ${token}` }
            });
            if (res.ok) {
                const data = await res.json();
                const products = JSON.parse(decodeURIComponent(escape(atob(data.content))));
                listDiv.innerHTML = products.reverse().map(p => `
                    <div class="luxury-card p-4 rounded-2xl flex items-center gap-4 border-l-4 border-blue-500">
                        <img src="${p.image || 'https://via.placeholder.com/60'}" class="w-12 h-12 rounded-lg object-cover">
                        <div class="flex-1">
                            <h4 class="font-bold gold-text">${p.name}</h4>
                            <p class="text-xs text-gray-500">${p.priceDA} DA - ${p.category}</p>
                        </div>
                    </div>
                `).join('');
            }
        } catch (e) { console.error(e); }
    }

    async function uploadToGithub() {
        const token = localStorage.getItem('gh_token_mimo');
        const btn = document.getElementById('submit-btn');
        const status = document.getElementById('status');
        const product = {
            id: Date.now(),
            name: document.getElementById('p-name').value,
            category: document.getElementById('p-cat').value,
            type: document.getElementById('p-type').value,
            priceDA: document.getElementById('p-price-da').value,
            priceUSD: document.getElementById('p-price-usd').value,
            image: document.getElementById('p-img').value,
            sellerLink: document.getElementById('p-link').value,
            desc: document.getElementById('p-desc').value,
            date: new Date().toLocaleDateString()
        };

        if(!product.name || !product.priceDA) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
        btn.disabled = true;
        status.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...";

        try {
            let sha = ""; let currentData = [];
            const getRes = await fetch(`https://api.github.com/repos/${REPO}/contents/${FILE_PATH}`, {
                headers: { 'Authorization': `token ${token}` }
            });
            if (getRes.ok) {
                const fileData = await getRes.json();
                sha = fileData.sha;
                currentData = JSON.parse(decodeURIComponent(escape(atob(fileData.content))));
            }
            currentData.push(product);
            const putRes = await fetch(`https://api.github.com/repos/${REPO}/contents/${FILE_PATH}`, {
                method: 'PUT',
                headers: { 'Authorization': `token ${token}`, 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    message: "New Product",
                    content: btoa(unescape(encodeURIComponent(JSON.stringify(currentData, null, 2)))),
                    sha: sha
                })
            });
            if (putRes.ok) {
                status.innerHTML = "âœ… Ù†Ø¬Ø­ Ø§Ù„Ø±ÙØ¹!";
                loadProducts();
            }
        } catch (err) { status.innerHTML = "âŒ Ø®Ø·Ø£!"; } finally { btn.disabled = false; }
    }

    function clearToken() { localStorage.removeItem('gh_token_mimo'); location.reload(); }
</script>
</body>
</html>
